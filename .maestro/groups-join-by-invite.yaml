# E2E: 그룹 탭에서 초대 코드 "TESTCODE"로 그룹 참여
# 사전 조건: admin-create-group-invite-test.yaml 선행 실행 (초대 코드 TESTCODE인 그룹 생성)
# Maestro는 유니코드 입력 미지원 → ASCII 초대 코드 사용
appId: com.gns.hermitcomm.dev
---
- runFlow: common/launch-app.yaml

# 그룹 탭 이동
- tapOn: "그룹"
- extendedWaitUntil:
    visible: "초대 코드로 참여"
    timeout: 8000

# 초대 코드 입력 (ASCII)
- tapOn:
    text: "초대 코드 입력"
    optional: true
- runFlow: common/ensure-english-keyboard.yaml
- inputText: "TESTCODE"

# 참여하기
- tapOn: "참여하기"

# 완료 알림 대기 (제목 "완료" 노출 후 확인 버튼 탭)
- extendedWaitUntil:
    visible: "완료"
    timeout: 15000
- tapOn: "확인"

# 참여한 그룹이 목록에 보이는지 확인
- extendedWaitUntil:
    visible: "E2E Invite Test"
    timeout: 5000
- assertVisible: "E2E Invite Test"

# 내 그룹 목록에서 테스트 그룹 제거: 나가기 후 확인
- tapOn: "나가기"
- extendedWaitUntil:
    visible: "그룹 나가기"
    timeout: 5000
- tapOn: "나가기"
- extendedWaitUntil:
    visible: "완료"
    timeout: 10000
- tapOn: "확인"
